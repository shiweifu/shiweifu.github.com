<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>坑 - Exception</title>
        <script>if (top !== self) top.location = self.location;</script>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0" />
        <link rel="stylesheet" href="/static/style.css?v=3dd6b" />
        <link rel="stylesheet" href="/static/pygments.css?v=c6adc" />
        
        <link rel="alternate" type="application/rss+xml" href="/feed.xml" title="Exception" />
        <!--[if lt IE 9]>
        <script type="text/javascript" src="/static/html5shiv.js?v=9a10c"></script>
        <![endif]-->
        
        
<link rel="canonical" href="/trap.html" />


    </head>
    <body>
        <header id="header">
            <h1 id="brand"><a href="/">Exception</a></h1>
            <nav id="nav" role="navigation">
                
                <a href="/">Home</a>
                <a href="/page/about.html">About</a>
                <a href="/page/trap.html">TRAP</a>
            </nav>
        </header>

        <div id="main">
            <div class="container">
<div class="hentry">
    <h1 class="entry-title">坑</h1>
    <div class="entry-content">
        <h3>2012.08.05</h3>

<ul>
<li>对openresty 服务器进行压力测试，不久就挂了，日志显示是因为分配不到内存。以为是代码的问题，反复揣摩，未发现啥问题，在nginx配置文件中调整进程数，略微有效，还是会挂，想到周日晚上可能会家班，非常难过……想到了为了方便调试，在配置中打开了缓存lua代码的选项，将其关闭，再测试，cpu 轻松跑满，内存占用只有10多MB，松了一口气。</li>
</ul>

<h3>2012.08.07</h3>

<ul>
<li>随机生成文件名总是随机性不够大，1000个中会重复一次，折腾了半天，发现是忘了给lua 加srand，最终搞定</li>
</ul>

<h3>2012.08.08</h3>

<ul>
<li>在用的公司库遭遇奇怪问题，折腾了半天，在主程的点拨下，得知是openresty 版本的问题……原来公司用的是development版</li>
</ul>

<h3>2012.08.10</h3>

<ul>
<li>用Python 写了一个调用curl 来访问url 添加测试数据的工具。得到的数据总是不对，百思不得其解，google之，在curl faq 页面发现是shell 将&quot;给做处理了&hellip;.</li>
</ul>

    </div>
</div>
</div>
        </div>

        <footer id="footer">
            <hr class="end" />
            
            <p class="copyright">
            <span class="software">
                Powered by <a href="http://lab.lepture.com/liquidluck/">Felix Felicis</a> 1.12,
            </span>
            <span class="theme">
                Theme <a href="https://github.com/lepture/liquidluck-theme-moment" rel="nofollow">moment</a> 0.9 by <a href="http://lepture.com">Hsiaoming Yang</a>
            </span>
            </p>
        </footer>
        <script type="text/javascript" src="/static/mobile.js?v=3b6df"></script>
        
    </body>
</html>